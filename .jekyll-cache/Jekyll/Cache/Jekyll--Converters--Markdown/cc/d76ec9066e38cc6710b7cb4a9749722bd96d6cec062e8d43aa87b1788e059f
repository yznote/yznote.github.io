I"é<h4 id="å¤šå±‚scrollviewåµŒå¥—">å¤šå±‚<code class="highlighter-rouge">Scrollview</code>åµŒå¥—</h4>

<blockquote>
  <p>åº•éƒ¨æ˜¯ä¸€ä¸ª<code class="highlighter-rouge">scrllview</code>,å­ç±»æ˜¯<code class="highlighter-rouge">collectionview</code>,è¦æ±‚å‘ä¸Šæ»‘åŠ¨çš„æ—¶å€™<code class="highlighter-rouge">scrllview</code>å’Œ<code class="highlighter-rouge">collectionview</code>å¯ä»¥åšåˆ°è¿ç»­æ»‘åŠ¨</p>
</blockquote>

<p>çº¦å®š: åº•éƒ¨ScollViewæˆ‘ä»¬ç§°ä¹‹ä¸ºMainScroll,å­ç±»CollectionViewç§°ä¹‹ä¸ºSubCollectionView</p>

<p><strong>é¦–å…ˆæˆ‘ä»¬å†™ä¸€ä¸ª<code class="highlighter-rouge">ScrollView</code>çš„åŸºç±»</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@interface RKScrollView : UIScrollView&lt;UIGestureRecognizerDelegate&gt;

@end

@implementation HoverPageScrollView

- (BOOL)touchesShouldCancelInContentView:(UIView *)view{
    return YES;
}
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer{
    
    return YES;
}
@end
</code></pre></div></div>

<p><strong><code class="highlighter-rouge">MainScrollView</code>ç»§æ‰¿<code class="highlighter-rouge">RKScrollView</code></strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    //æ³¨æ„è¿™é‡Œçˆ¶ç±»æœ‰ä¸ªå±æ€§_canScrollé»˜è®¤è®¾ç½®ä¸ºYES
    _canScroll = YES;

    _mainScrollview = [[RKScrollView alloc]initWithFrame:CGRectMake(0, 0, _window_width, _window_height-78-statusbarHeight-ShowDiff-49)];
    _mainScrollview.backgroundColor = [UIColor whiteColor];
    _mainScrollview.contentSize = CGSizeMake(0, _mainScrollview.height+400);
    //é‡è¦å±æ€§ã€å¦‚æœéœ€è¦ä¸‹æ‹‰åˆ·æ–°å¯åœ¨didscrollä»£ç†ä¸­æ›´æ”¹æ­¤å±æ€§ã€‘
    _mainScrollview.bounces = NO;
    _mainScrollview.delegate = self;
    _mainScrollview.scrollViewWhites = [NSMutableArray array];
    [self.view addSubview:_mainScrollview];
</code></pre></div></div>

<p><strong><code class="highlighter-rouge">MainScrollview</code>ä»£ç†æ–¹æ³•ä¸­çš„å®ç°</strong></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-(void)scrollViewDidScroll:(UIScrollView *)scrollView{

    //MainScrollviewä¸éœ€è¦åˆ·æ–°è¿™é‡Œå¯ä¸åšå¤„ç†
    if (scrollView == _mainScrollview){
        
        if (scrollView.contentOffset.y &lt;= 0) {
            _mainScrollview.bounces = YES;
            subCollectionView.bounces = NO;
            
        }else{
            _mainScrollview.bounces = NO;
            subCollectionView.bounces = YES;
        }
    }
    
    CGFloat bottomCellOffset = tableHeaderView.height-40;//è¿™é‡Œé«˜åº¦è®¾ç½®ä¸ºå¤´éƒ¨è§†å›¾é«˜åº¦å³å¯
    if (scrollView.contentOffset.y &gt;= bottomCellOffset) {
        scrollView.contentOffset = CGPointMake(0, bottomCellOffset);
        if (_canScroll) {
            _canScroll = NO;
            subCollectionView.canScroll = YES;
        }
    }else{
        if (!_canScroll) {//å­è§†å›¾æ²¡åˆ°é¡¶éƒ¨
            scrollView.contentOffset = CGPointMake(0, bottomCellOffset);
        }
    }
    _mainScrollview.showsVerticalScrollIndicator = _canScroll?YES:NO;
    
}
- (void)changeScrollStatus {
    _canScroll = YES;
    subCollectionView.canScroll = NO;
}
</code></pre></div></div>

<p><strong>å­ç±»<code class="highlighter-rouge">subCollectionView</code></strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-(void)scrollViewDidScroll:(UIScrollView *)scrollView{
    
    if (!_canScroll) {
        scrollView.contentOffset = CGPointZero;
    }
    if (scrollView.contentOffset.y &lt;= 0) {
        
        _canScroll = NO;
        scrollView.contentOffset = CGPointZero;
        //è¿™é‡Œå°±æ˜¯é€šçŸ¥çˆ¶ç±»æ”¹å˜çˆ¶ç±»çš„canScrollå±æ€§
        if (_delegate &amp;&amp; [_delegate respondsToSelector:@selector(changeScrollStatus)]) {
            [_delegate changeScrollStatus];
        }
    }
    _subCollectionView.showsVerticalScrollIndicator = _canScroll?YES:NO;
}

</code></pre></div></div>

:ET