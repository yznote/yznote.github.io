I"<h4 id="cocoapods是什么">CocoaPods是什么？</h4>

<p><code class="highlighter-rouge">CocoaPods</code>是一个负责管理<code class="highlighter-rouge">iOS</code>项目中第三方开源库的工具。<code class="highlighter-rouge">CocoaPods</code>的项目源码在<code class="highlighter-rouge">Github</code>上管理。该项目开始于2011年8月12日，在这两年多的时间里，它持续保持活跃更新。开发<code class="highlighter-rouge">iOS</code>项目不可避免地要使用第三方开源库，<code class="highlighter-rouge">CocoaPods</code>的出现使得我们可以节省设置和更新第三方开源库的时间，在<code class="highlighter-rouge">iOS</code>开发中经常会用到第三方库如<code class="highlighter-rouge">AFNetworking</code>,<code class="highlighter-rouge">ASIHttpRequest</code>等，在使用第三方库时，你除了要导数源码外，但是，集成这些依赖库需要我们手动去配置，还有当这些第三方库发生了更新，还需要手动去更新项目。这就显得非常麻烦。有麻烦自然有解决办法，<code class="highlighter-rouge">CocoaPods</code>就是为了解决这个问题而生的。通过<code class="highlighter-rouge">CocoaPods</code>，我们可以将第三方的依赖库统一管理起来，配置和更新只需要通过简单的几行命令即可完成。</p>

<h4 id="cocoapods的下载及安装">CocoaPods的下载及安装</h4>

<p><code class="highlighter-rouge">mac</code>系统已经默认安装好<code class="highlighter-rouge">Ruby</code>环境，如果你不确定自己系统中是否有<code class="highlighter-rouge">Ruby</code>的，可以在终端中输入命令行：<code class="highlighter-rouge">ruby -v</code>查看当前<code class="highlighter-rouge">ruby</code>版本.</p>

<p>确定以后，接下来就可以下载和安装<code class="highlighter-rouge">CocoaPods</code>，只需要一行命令。在<code class="highlighter-rouge">Terminator</code>（也就是终端）中输入以下命令：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo gem install cocoapods
</code></pre></div></div>

<p>但是，在终端中敲入这个命令之后，会发现半天没有任何反应。原因是那堵墙阻挡了cocoapods.org。</p>

<p>解决办法是，我们可以用阿里云的Ruby镜像来访问cocoapods。按照下面的顺序在终端中敲入依次敲入命令：</p>

<p>首先，检查你的ruby源：</p>

<p>$gem sources -l
　　默认情况下，终端应该返回如下信息：</p>

<p><em>** CURRENT SOURCES **</em></p>

<p>https://rubygems.org/
　　当然这个源在墙内是访问不到的。因此我们需要寻找一个可以在国内访问到的镜像。目前笔者找到的是http://rubygems-china.oss.aliyuncs.com这个阿里云的镜像，当然随着时间的推移，未来这个镜像也有可能无法访问了，到时候就只能重新寻找了。</p>

<p>　　确认镜像可用后，现在就要开始修改ruby源了。首先执行以下命令删除原来的ruby源：</p>

<p>$gem sources –remove https://rubygems.org/
　　执行命令后可在终端看见以下信息：</p>

<p>https://rubygems.org/ removed from sources
　　然后下一步添加你找到的可用的镜像源：</p>

<p>$gem sources -a http://rubygems-china.oss.aliyuncs.com
　　此时如果你再执行gem sources -l命令，就能看到当前镜像源里只有阿里云这一个了。此时你就可以重新执行这一段开头的那句命令了：</p>

<p>$sudo gem install cocoapods
　　如果一切正常，你应该能看到一段安装进度，以及最后有一条信息：</p>

<p>3 gems installed
　　确认看见这条信息，后先判断的CocoaPods是否可以使用，可以用CocoaPods的搜索功能验证一下。在终端中输入：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  pod search AFNetworking；
</code></pre></div></div>

<p>执行后可能会一直停在</p>

<p>Setting up CocoaPods master repo然后(很久)会出现如下错误：</p>

<p>解决办法是：</p>

<p>这说明CocoaPods还不能正常使用，需要更新pod，下载它的一些依赖包；在终端中输入：</p>

<p>$ pod setup</p>

<p>过一段时间之后，你会在终端中看到跟上面同样的红色的错误信息。</p>

<p>这说明某些环境原因导致pod更新不了，可能原因有，1）gem版本太低；2）github无法链接；3）.cocoapods目录下的配置信息错误。我们可以一个一个来排除，</p>

<p>首先更新gem到最新版本，在终端中输入：</p>

<p>$ sudo gem update –system 
然后检查是否可以ping通github，在终端中输入：</p>

<p>$ ping github.com</p>

<p>然后查看pob repo list：</p>

<p>$ pod repo list
说明Cocoapods在将它的信息下载到 ~/.cocoapods里；</p>

<p>cd  到该目录里，用du -sh *命令来查看文件大小，结果显示0 repos，说明没有安装成功；</p>

<p>在终端输入：</p>

<p>cd ~/.cocoapods</p>

<p>进入cocoapods文件后在终端输入：du -sh *</p>

<p>重新执行pod setup，过一段时间后提示setup completed,在终端中输入 pod list，展示出安装列表；</p>

<p>这样总算安装好了。接下来再一次输入：</p>

<p>pod search AFNetworking</p>

<p>输入过后它可能会报：</p>

<p>[!] Unable to find a pod with name, author, summary, or descriptionmatching <code class="highlighter-rouge">AFNetworking</code></p>

<p>解决方案是：</p>

<p>输入：</p>

<p>rm ~/Library/Caches/CocoaPods/search_index.json</p>

<p>后在一次输入：pod search AFNetworking</p>

<p>就可以咯。</p>

<p>三,cocoapods的使用
　　首先来到你的项目文件：</p>

<p>　　cd 项目文件的位置</p>

<p>　　然后，添加一个Podfile文件： vim Podfile</p>

<p>然后按i进入插入模式，进行编辑，在文件中输入以下内容：</p>

<p>注意百度上很多旧版本输入的类容：</p>

<p>platform :ios, ‘8.1’
pod ‘AFNetworking’, ‘~&gt; 2.0’</p>

<p>它会报：[!] The dependency <code class="highlighter-rouge">AFNetworking (~&gt; 3.0)</code> is not used in any concrete target.</p>

<p>现在版本升级官方给的文档是：
platform :ios, ‘8.0’</p>

<p>target ‘你的项目名称’ do</p>

<p>pod ‘AFNetworking’, ‘~&gt; 3.0’</p>

<p>end</p>

<p>注意：’你的项目名称’是你项目文件中’xx.xcodeproj’文件，’xx.xcodeproj’去掉后缀名所得的‘xx’==（就是）‘你的项目名称’</p>

<p>输入完成后按ESC退出编辑模式，最后输入:wq保存并退出文件。此时可以发现在项目目录下多了一个Podfile的文件，请注意这个文件必须与.xcodeproj在同一目录下。</p>

<p>最后：</p>

<p>pod install</p>

<p>没报错就可以了。</p>

:ET