I"™<p>#import â€œViewController.hâ€</p>

<p>@interface ViewController ()</p>

<p>@property (weak, nonatomic) IBOutlet UIImageView *catImageView;</p>

<ul>
  <li>
    <p>(IBAction)doCymbal:(UIButton *)sender;</p>
  </li>
  <li>
    <p>(IBAction)doDrink:(UIButton *)sender;</p>
  </li>
  <li>
    <p>(IBAction)doEat:(UIButton *)sender;</p>
  </li>
  <li>
    <p>(IBAction)doFart:(UIButton *)sender;</p>
  </li>
  <li>
    <p>(IBAction)doPie:(UIButton *)sender;</p>
  </li>
  <li>
    <p>(IBAction)doScratch:(UIButton *)sender;</p>
  </li>
</ul>

<p>@end</p>

<p>@implementation ViewController</p>

<ul>
  <li>
    <p>(void)viewDidLoad {</p>

    <p>[super viewDidLoad];</p>

    <p>// Do any additional setup after loading the view, typically from a nib.</p>
  </li>
</ul>

<p>}</p>

<ul>
  <li>
    <p>(void)didReceiveMemoryWarning {</p>

    <p>[super didReceiveMemoryWarning];</p>

    <p>// Dispose of any resources that can be recreated.</p>
  </li>
</ul>

<p>}</p>

<p>-(void)beginAnimationWithCount:(int)count andName:(NSString*)name</p>

<p>{</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>if (_catImageView.isAnimating) {

    [_catImageView stopAnimating];

}

//æ¥æ”¶å›¾ç‰‡

NSMutableArray* image_array = [NSMutableArray array];

for (int i=0; i&lt;=count; i++) {

    NSString* imageName = [NSString stringWithFormat:@"%@_d.jpg",name,i];

    //æœ‰ç¼“å­˜

    //UIImage *image = [UIImage imageNamed:imageName];

    //æ²¡æœ‰ç¼“å­˜

    NSString*path=[[NSBundle mainBundle]pathForResource:imageName ofType:nil];

    UIImage*image=[UIImage imageWithContentsOfFile:path];

    [image_array addObject:image];

}

_catImageView.animationImages = image_array;//å±•ç¤ºåŠ¨ç”»

_catImageView.animationDuration = [image_array count]*0.1;

_catImageView.animationRepeatCount = 1;

[_catImageView startAnimating];

//ä¸€æ¬¡åŠ¨ç”»åé‡Šæ”¾å†…å­˜

[_catImageView performSelector:@selector(setAnimationImages:) withObject:nil afterDelay:[image_array count]*0.1];
</code></pre></div></div>

<p>}</p>

<ul>
  <li>
    <p>(IBAction)doCymbal:(UIButton *)sender {</p>

    <p>[self beginAnimationWithCount:12 andName:@â€cymbalâ€];</p>
  </li>
</ul>

<p>}</p>

<ul>
  <li>
    <p>(IBAction)doDrink:(UIButton *)sender{</p>

    <p>[self beginAnimationWithCount:80 andName:@â€drinkâ€];</p>
  </li>
</ul>

<p>}</p>

<ul>
  <li>
    <p>(IBAction)doEat:(UIButton *)sender{</p>

    <p>[self beginAnimationWithCount:39 andName:@â€eatâ€];</p>
  </li>
</ul>

<p>}</p>

<ul>
  <li>
    <p>(IBAction)doFart:(UIButton *)sender{</p>

    <p>[self beginAnimationWithCount:27 andName:@â€fartâ€];</p>
  </li>
</ul>

<p>}</p>

<ul>
  <li>
    <p>(IBAction)doPie:(UIButton *)sender{</p>

    <p>[self beginAnimationWithCount:23 andName:@â€pieâ€];</p>
  </li>
</ul>

<p>}</p>

<ul>
  <li>
    <p>(IBAction)doScratch:(UIButton *)sender{</p>

    <p>[self beginAnimationWithCount:55 andName:@â€scratchâ€];</p>
  </li>
</ul>

<p>}</p>

<p>@end</p>
:ET