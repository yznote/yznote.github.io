I"Áa<p>Url:
url = [url stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
url = [url stringByAddingPercentEncodingWithAllowedCharacters:[NSCharacterSet URLQueryAllowedCharacterSet]];
//æŒ‰é’®
[_coverBtn.imageView setContentMode:UIViewContentModeScaleAspectFill];
_coverBtn.contentHorizontalAlignment = UIControlContentHorizontalAlignmentFill;
_coverBtn.contentVerticalAlignment = UIControlContentVerticalAlignmentFill;
å½±æ¢­ä¸‹è½½åœ°å€: https://down.vpsmm.com/shadowsocks/
ç‰ˆæœ¬åˆ¤æ–­ 
if (@available(iOS 10.0,<em>)) {
        NSLog(@â€10+â€);
    }else {
         NSLog(@â€10-â€œ);
    }
if (@available(iOS 11.0,</em>)) {
        self.tableView.contentInsetAdjustmentBehavior = UIScrollViewContentInsetAdjustmentNever;
    }else {
        self.automaticallyAdjustsScrollViewInsets = NO;
    }
//ç³»ç»Ÿç…§ç‰‡é€‰æ‹©å™¨
//é€‰æ‹©å‰(present)
if (@available(iOS 11, *)) {
        UIScrollView.appearance.contentInsetAdjustmentBehavior = UIScrollViewContentInsetAdjustmentAutomatic;
    }
//å®Œæˆé€‰æ‹©(finish)
if (@available(iOS 11, *)) {
        UIScrollView.appearance.contentInsetAdjustmentBehavior = UIScrollViewContentInsetAdjustmentNever;
    }
present ï¼š [UIApplication sharedApplication].statusBarHidden=YES;  dismissï¼š [UIApplication sharedApplication].statusBarHidden=NO;
//ç›¸å†Œå–æ¶ˆæŒ‰é’®ä¸èƒ½ç‚¹å‡»</p>
<ul>
  <li>
    <p>(void)navigationController:(UINavigationController <em>)navigationController didShowViewController:(UIViewController *)viewController animated:(BOOL)animated {
  if ([UIDevice currentDevice].systemVersion.floatValue &lt; 11) {
      return;
  }
  if ([viewController isKindOfClass:NSClassFromString(@â€PUPhotoPickerHostViewControllerâ€)]) {
      [viewController.view.subviews enumerateObjectsUsingBlock:^(__kindof UIView * _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) {
          if (obj.frame.size.width &lt; 42) {
              [viewController.view sendSubviewToBack:obj];
              *stop = YES;
          }
      }];
  }
}
/</em>
RK-æ—¶é—´å€’åº
*/
options.sortDescriptors = @[[NSSortDescriptor sortDescriptorWithKey:@â€creationDateâ€ ascending:NO]];
tableviewå›å¼¹
 _tableView.estimatedRowHeight =0;
 _tableView.estimatedSectionHeaderHeight =0;
 _tableView.estimatedSectionFooterHeight =0;
ä¸€ã€è´å¡å°”æ›²çº¿ç”»åœ†è§’
 UIBezierPath *maskPath = [UIBezierPath bezierPathWithRoundedRect:litleNav.bounds  byRoundingCorners:UIRectCornerTopRight|UIRectCornerTopLeft cornerRadii:CGSizeMake(10, 10)];
 CAShapeLayer *maskLayer = [[CAShapeLayer alloc] init];
 maskLayer.frame = litleNav.bounds;
 maskLayer.path = maskPath.CGPath;
 litleNav.layer.mask = maskLayer;</p>

    <p>å»¶ä¼¸:(segment itemsåº•éƒ¨åœ†è§’)
    for (int i=0; i&lt;_segmentC.subviews.count; i++) {
          CGFloat ww = _window_width/_segmentC.subviews.count;
          CGRect srect = CGRectMake(ww * i, 64+statusbarHeight+_window_width/4.3, ww, 40);
          UIView <em>subView = _segmentC.subviews[i];
          subView.frame = srect;
          UIBezierPath *maskPath = [UIBezierPath bezierPathWithRoundedRect:subView.bounds    byRoundingCorners:UIRectCornerBottomRight|UIRectCornerBottomLeft cornerRadii:CGSizeMake(10, 10)];
          CAShapeLayer *maskLayer = [[CAShapeLayer alloc] init];
          maskLayer.frame = subView.bounds;
          maskLayer.path = maskPath.CGPath;
          _segmentC.subviews[i].layer.mask = maskLayer;
      }
      å›¾ç‰‡åˆ‡å‰²   maskImage = [maskImage resizableImageWithCapInsets:UIEdgeInsetsMake(30, 20, 30, 20)];
äºŒã€å¯Œæ–‡æœ¬
int length = [self convertToInt:amountL.text];
      NSMutableAttributedString *attStr=[[NSMutableAttributedString alloc]initWithString:amountL.text];
      [attStr addAttribute:NSFontAttributeName value:[UIFont systemFontOfSize:10.0] range:NSMakeRange(length-3, 3)];
      amountL.attributedText = attStr;
-(int)convertToInt:(NSString</em>)strtemp{
  int strlength = 0;
  for (int i=0 ; i&lt;[strtemp lengthOfBytesUsingEncoding:NSUnicodeStringEncoding] ;i++) {
      strlength++;
  }
  return (strlength+1)/2;
}
  //æ®µè½æ ·å¼
  NSMutableParagraphStyle <em>paragraph = [[NSMutableParagraphStyle alloc]init];
  //è¡Œé—´è·
  paragraph.lineSpacing = 5;
  //æ·»åŠ æ®µè½è®¾ç½®
  [text addAttribute:NSParagraphStyleAttributeName value:paragraph range:NSMakeRange(0, text.length)];
ä¸‰ã€æ–‡æœ¬è®¡ç®—
//è®¡ç®—å­—ç¬¦ä¸²åº”è¯¥å æœ‰çš„å¤§å°
-(CGSize)sizeWithString:(NSString *)string andFont:(UIFont *)font {
  CGSize size = [string sizeWithAttributes:[NSDictionary dictionaryWithObjectsAndKeys:font,NSFontAttributeName, nil]];
  return size;
}
//è®¡ç®—æ–‡æœ¬å†…å®¹å æœ‰çš„å¤§å°
-(CGRect)rectWithString:(NSString *)string andFont:(UIFont *)font andWidth:(CGFloat)width {
  CGRect rect = [string boundingRectWithSize:CGSizeMake(width, CGFLOAT_MAX) options:NSStringDrawingUsesLineFragmentOrigin attributes:[NSDictionary dictionaryWithObjectsAndKeys:font,NSFontAttributeName, nil] context:nil];
  return rect;
}
å››ã€ç½‘å€æ­£åˆ™åˆ¤æ–­
//NSString *pattern = @â€http(s)?://([\w-]+\.)+[\w-]+(/[\w- ./?%&amp;=]</em>)?â€;
  NSString <em>pattern = @â€(http://|ftp://|https://|www){0,1}[^\u4e00-\u9fa5\s]</em>?\.(com|net|cn|me|tw|fr)[^\u4e00-\u9fa5\s]*â€;
  NSError *error = nil;
  NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:pattern options:NSRegularExpressionCaseInsensitive error:&amp;error];
  NSArray&lt;NSTextCheckingResult *&gt; *result = [regex matchesInString:keyField.text options:0 range:NSMakeRange(0, keyField.text.length)];
  if (result) {
      for (int i = 0; i&lt;result.count; i++) {
          NSTextCheckingResult *res = result[i];
          NSLog(@â€str == %@â€, [keyField.text substringWithRange:res.range]);
      }
  }else{
      NSLog(@â€error == %@â€,error.description);
  }
è¡¥å……ï¼šæ•°å­—å­—æ¯æ­£åˆ™
-(BOOL)judgePassWordLegal:(NSString *)pass {
  BOOL result = false;
  if ([pass length] &gt;= 8) {
      // åˆ¤æ–­é•¿åº¦å¤§äº8ä½åå†æ¥ç€åˆ¤æ–­æ˜¯å¦åŒæ—¶åŒ…å«æ•°å­—å’Œå­—ç¬¦
      NSString * regex = @â€^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,100}$â€;
      NSPredicate *pred = [NSPredicate predicateWithFormat:@â€SELF MATCHES %@â€, regex];
      result = [pred evaluateWithObject:pass];
  }
  return result;
}
/**</p>
    <ul>
      <li>æ‰‹æœºå·ç </li>
      <li>ç§»åŠ¨ï¼š134[0-8],135,136,137,138,139,150,151,157,158,159,182,187,188,1705</li>
      <li>è”é€šï¼š130,131,132,152,155,156,185,186,1709</li>
      <li>ç”µä¿¡ï¼š133,1349,153,180,189,1700
   */
  //    NSString * MOBILE = @â€^1((3//d|5[0-35-9]|8[025-9])//d|70[059])\d{7}$â€;//æ€»å†µ</li>
    </ul>

    <p>/**
   10         * ä¸­å›½ç§»åŠ¨ï¼šChina Mobile
   11         * 134[0-8],135,136,137,138,139,150,151,157,158,159,182,187,188ï¼Œ1705
   12         */
  NSString * CM = @â€^1(34[0-8]|(3[5-9]|5[017-9]|8[278])\d|705)\d{7}$â€;
  /**
   15         * ä¸­å›½è”é€šï¼šChina Unicom
   16         * 130,131,132,152,155,156,185,186,1709
   17         */
  NSString * CU = @â€^1((3[0-2]|5[256]|8[56])\d|709)\d{7}$â€;
  /**
   20         * ä¸­å›½ç”µä¿¡ï¼šChina Telecom
   21         * 133,1349,153,180,189,1700
   22         */
  NSString * CT = @â€^1((33|53|8[09])\d|349|700)\d{7}$â€;</p>

    <p>/**
   25         * å¤§é™†åœ°åŒºå›ºè¯åŠå°çµé€š
   26         * åŒºå·ï¼š010,020,021,022,023,024,025,027,028,029
   27         * å·ç ï¼šä¸ƒä½æˆ–å…«ä½
   28         */
  NSString * PHS = @â€^0(10|2[0-5789]|\d{3})\d{7,8}$â€;
äº”ã€ç¦æ­¢å³æ»‘è¿”å›
self.navigationController.interactivePopGestureRecognizer.enabled = NO;
self.navigationController.navigationBarHidden = YES;
self.navigationController.interactivePopGestureRecognizer.delegate =nil;
  æ³¨:æ‰‹åŠ¿æ’é™¤ç‚¹å‡»èŒƒå›´
 #pragma mark - UIGestureRecognizerDelegate</p>
  </li>
  <li>(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch {
  if( [touch.view isDescendantOfView:_agreementOrPrivacy])
      return NO;
  return YES;
}
å…­ã€è·å–è§†é¢‘ç¬¬ä¸€å¸§</li>
  <li>
    <p>(UIImage*) getVideoPreViewImageWithPath:(NSURL *)videoPath {
  AVURLAsset *asset = [[AVURLAsset alloc] initWithURL:videoPath options:nil];
  AVAssetImageGenerator *gen = [[AVAssetImageGenerator alloc] initWithAsset:asset];
  gen.appliesPreferredTrackTransform = YES;
  CMTime time   = CMTimeMakeWithSeconds(0.0, 600);
  NSError *error  = nil;
  CMTime actualTime;
  CGImageRef image = [gen copyCGImageAtTime:time actualTime:&amp;actualTime error:&amp;error];
  UIImage *img   = [[UIImage alloc] initWithCGImage:image];
  return img;
}
ä¸ƒã€    textView
      _desTV.editable = NO;
      _desTV.bounces = NO;
      _desTV.selectable = NO;
      _desTV.showsVerticalScrollIndicator = NO;
      _desTV.textContainerInset = UIEdgeInsetsMake(0, 2, 2, 2);</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  æ‰©å±•textViewæ¨ªå‘æ»šåŠ¨
  _desTV.textContainer.lineBreakMode = NSLineBreakByTruncatingHead;
  _desTV. textContainer.maximumNumberOfLines = 1;
</code></pre></div>    </div>

    <p>è‡ªå®šä¹‰textfieldï¼š
  -(void)drawPlaceholderInRect:(CGRect)rect {
   // è®¾ç½®å¯Œæ–‡æœ¬å±æ€§
   NSMutableDictionary *dictM = [NSMutableDictionary dictionary];
   dictM[NSFontAttributeName] = self.font;
   dictM[NSForegroundColorAttributeName] = [UIColor whiteColor];
   CGPoint point = CGPointMake(0, (rect.size.height - self.font.lineHeight) * 0.5);
   [self.placeholder drawAtPoint:point withAttributes:dictM];
  }
  //textfield placeholder å±…ä¸­å¹¶æ”¹å˜é¢œè‰²
   NSMutableParagraphStyle *style = [[NSMutableParagraphStyle alloc] init];
   style.alignment = NSTextAlignmentCenter;
   NSAttributedString *attri = [[NSAttributedString alloc] initWithString:@â€è¾“å…¥æç°é‡‘é¢â€              attributes:@{NSForegroundColorAttributeName:RGB_COLOR(@â€#8c8c8câ€, 1),NSFontAttributeName:SYS_Font(16),      NSParagraphStyleAttributeName:style}];
  _cyConView.cyWantTF.attributedPlaceholder = attri;</p>
  </li>
</ul>

<p>å…«ã€é”®ç›˜
 [IQKeyboardManager sharedManager].enable = YES;
 [IQKeyboardManager sharedManager].shouldResignOnTouchOutside = YES;
 [IQKeyboardManager sharedManager].enableAutoToolbar = NO;
ä¹ã€åˆ·æ–°
 MJRefreshNormalHeaderã€MJRefreshBackNormalFooter
åã€æ‰“å°å­—ä½“
NSArray * fontArrays = [[UIFont familyNames] sortedArrayUsingComparator:^NSComparisonResult(id  _Nonnull obj1, id  _Nonnull obj2) {
        NSString *str1 = (NSString *)obj1;
        NSString *str2 = (NSString *)obj2;
        return [str1 compare:str2];
    }];
    for(NSString *fontfamilyname in fontArrays)
    {
        NSLog(@â€family:â€™%@â€™â€œ,fontfamilyname);
        for(NSString *fontName in [UIFont fontNamesForFamilyName:fontfamilyname])
        {
            NSLog(@â€\tfont:â€™%@â€™â€œ,fontName);
        }
        NSLog(@â€â€”â€”â€”â€”-â€œ);
    }
åä¸€ã€å…ƒç´ æ›¿æ¢
   NSMutableDictionary *needReloadDic = [NSMutableDictionary dictionaryWithDictionary:_dataArray[btn.tag - 202]];
   [needReloadDic setValue:isAtt forKey:@â€isAttentionâ€];
   NSMutableArray *m_arr = [NSMutableArray arrayWithArray:_dataArray];
   [m_arr replaceObjectAtIndex:(btn.tag - 202) withObject:needReloadDic];
   _dataArray = [m_arr mutableCopy];
   NSIndexPath *indexPath=[NSIndexPath indexPathForRow:(btn.tag - 202) inSection:0];
  [_tableView reloadRowsAtIndexPaths:[NSArray arrayWithObjects:indexPath,nil] withRowAnimation:UITableViewRowAnimationNone];
åäºŒã€urlè½¬æ¢
1.æ•°æ®è¯·æ±‚æ—¶URLå«æœ‰ä¸­æ–‡ï¼Œéœ€è¦è½¬ç ä¸ºUTF8 
NSString * encodingString = [urlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];<br />
2.æ•°æ®è¯·æ±‚æ—¶ï¼Œå¾—åˆ°çš„URLæœ‰ä¸­æ–‡ä¹±ç ï¼Œå¯ä»¥æŒ‰å¦‚ä¸‹æ–¹å¼è½¬ç  NSString *decodeString = [urlString stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
åä¸‰ã€æŒ‰é’®ä¸Šå›¾ä¸‹æ–‡å­—
CGFloat totalH = _ruleBtn.imageView.frame.size.height + _ruleBtn.titleLabel.frame.size.height;
        CGFloat spaceH = 10;
         //è®¾ç½®æŒ‰é’®å›¾ç‰‡åç§»
        [_ruleBtn setImageEdgeInsets:UIEdgeInsetsMake(-(totalH - _ruleBtn.imageView.frame.size.height),0.0, 0.0, -_ruleBtn.titleLabel.frame.size.width)];
        //è®¾ç½®æŒ‰é’®æ ‡é¢˜åç§»
        [_ruleBtn setTitleEdgeInsets:UIEdgeInsetsMake(spaceH, -_ruleBtn.imageView.frame.size.width, -(totalH - _ruleBtn.titleLabel.frame.size.height),0.0)];
åå››ã€ç›‘å¬è¾“å…¥å˜åŒ–
#pragma mark - textfield ç›‘å¬å­—æ•°å˜åŒ–
-(void)textFiledEditChanged:(NSNotification *)noti {
    MyTextField *textField = (MyTextField *)noti.object;
    NSString *toBeString = textField.text;
     NSString *lang = [[[UITextInputMode activeInputModes]firstObject] primaryLanguage]; // é”®ç›˜è¾“å…¥æ¨¡å¼
    if ([lang isEqualToString:@â€zh-Hansâ€]) { // ç®€ä½“ä¸­æ–‡è¾“å…¥ï¼ŒåŒ…æ‹¬ç®€ä½“æ‹¼éŸ³ï¼Œå¥ä½“äº”ç¬”ï¼Œç®€ä½“æ‰‹å†™
        UITextRange *selectedRange = [textField markedTextRange];//è·å–é«˜äº®éƒ¨åˆ†
        UITextPosition *position = [textField positionFromPosition:selectedRange.start offset:0];
        //æ²¡æœ‰é«˜äº®é€‰æ‹©çš„å­—ï¼Œåˆ™å¯¹å·²è¾“å…¥çš„æ–‡å­—è¿›è¡Œå­—æ•°ç»Ÿè®¡å’Œé™åˆ¶
        if (!position) {
            if (toBeString.length &gt; 20) {
                textField.text = [toBeString substringToIndex:20];
                signature_num.text = [NSString stringWithFormat:@â€%lu/20â€,(20-textField.text.length)];
            }else{
                signature_num.text = [NSString stringWithFormat:@â€%lu/20â€,(20-toBeString.length)];
            }
        }else{
            //æœ‰é«˜äº®é€‰æ‹©çš„å­—ç¬¦ä¸²ï¼Œåˆ™æš‚ä¸å¯¹æ–‡å­—è¿›è¡Œç»Ÿè®¡å’Œé™åˆ¶
        }
    }else{
        // ä¸­æ–‡è¾“å…¥æ³•ä»¥å¤–çš„ç›´æ¥å¯¹å…¶ç»Ÿè®¡é™åˆ¶å³å¯ï¼Œä¸è€ƒè™‘å…¶ä»–è¯­ç§æƒ…å†µ
        if (toBeString.length &gt; 20) {
            textField.text = [toBeString substringToIndex:20];
            signature_num.text = [NSString stringWithFormat:@â€%lu/20â€,(20-textField.text.length)];
        }else{
            signature_num.text = [NSString stringWithFormat:@â€%lu/20â€,(20-toBeString.length)];
        }
    }</p>

<p>}
åäº”ã€jsonè½¬åŒ–
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:mix options:NSJSONWritingPrettyPrinted error:nil];
NSString *jsonStr = [[NSString alloc]initWithData:jsonData encoding:NSUTF8StringEncoding];
//å»é™¤ç©ºæ ¼ã€å›è½¦
jsonStr = [jsonStr stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
jsonStr = [jsonStr stringByReplacingOccurrencesOfString:@â€ â€œ withString:@â€â€];
jsonStr = [jsonStr stringByReplacingOccurrencesOfString:@â€\nâ€ withString:@â€â€];</p>

<p>NSData *mix_data = [locationContent.address dataUsingEncoding:NSUTF8StringEncoding];
NSDictionary *mix_dic = [NSJSONSerialization JSONObjectWithData:mix_data options:NSJSONReadingAllowFragments error:nil];
åå…­ã€æ‰‹åŠ¿å†²çªè§£å†³
#pragma mark - å·¦å³æ»‘åŠ¨æ‹¦æˆªå¤„ç†
-(BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer {</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>if ([gestureRecognizer isKindOfClass:[UISwipeGestureRecognizer class]]) {
    UISwipeGestureRecognizer *swipG = (UISwipeGestureRecognizer *)gestureRecognizer;
    if (swipG.direction == UISwipeGestureRecognizerDirectionLeft &amp;&amp; [[Config getLeftSlip] isEqual:@"1"]) {
        _backScrollView.scrollEnabled = NO;
        [Config saveLeftSlip:@"0"];
        //å‘å·¦
        [PublicView showLeftSilpCancel:nil Sure:^(NSString *type) {
            _backScrollView.scrollEnabled = YES;
        }];
    }else if(swipG.direction == UISwipeGestureRecognizerDirectionRight &amp;&amp; [[Config getRightSlip] isEqual:@"1"]){
        _backScrollView.scrollEnabled = NO;
        [Config saveRightSlip:@"0"];
        //å‘å³
        [PublicView showRightSilpCancel:nil Sure:^(NSString *type) {
            _backScrollView.scrollEnabled = YES;
        }];
    }
    return NO;
}
_backScrollView.scrollEnabled = YES;
return YES; } -(BOOL)gestureRecognizer:(UIGestureRecognizer*) gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer*)otherGestureRecognizer{
if ([otherGestureRecognizer.view isKindOfClass:[self.view class]]) {
    if (otherGestureRecognizer.state == UIGestureRecognizerStateBegan &amp;&amp;[_censhi isEqual:@"1"]) {
        return YES;
    }
}
_backScrollView.scrollEnabled = YES;
return NO; } åä¸ƒã€æŒ‰é’®ä¸‹åˆ’çº¿ NSMutableAttributedString *str = [[NSMutableAttributedString alloc] initWithString:@"ç­‰çº§è¯´æ˜?"];
    NSRange strRange = {0,[str length]};
    //    [str addAttribute:NSUnderlineStyleAttributeName value:[NSNumber numberWithInteger:NSUnderlineStyleSingle] range:strRange];
    [str addAttributes:[NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithInteger:NSUnderlineStyleSingle],NSUnderlineStyleAttributeName,RGB(170, 170, 170, 1), NSForegroundColorAttributeName,nil] range:strRange];
    [_privateBtn setAttributedTitle:str forState:UIControlStateNormal];
    [_privateBtn setTitleColor:RGB(170, 170, 170, 1) forState:0]; åå…«ã€å¯¼èˆª
[[UINavigationBar appearance] setBarTintColor:UIColor.blackColor];
[[UINavigationBar appearance] setTintColor:[UIColor whiteColor]];
[[UINavigationBar appearance] setTitleTextAttributes:@{NSFontAttributeName:[UIFont systemFontOfSize:18],NSForegroundColorAttributeName:[UIColor whiteColor]}];
[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"transparent.png"] forBarMetrics:UIBarMetricsDefault];
[[UINavigationBar appearance] setShadowImage:[UIImage new]]; åä¹ã€æ¨ªç«–å± #pragma mark - è¿›å…¥å…¨å± -(void)EnterFullScreen {

CGFloat full_y = (_window_height-_window_width)/2;
videoView.frame = CGRectMake(-full_y, full_y, _window_height, _window_width);
_exitScreenBtn.frame = CGRectMake(_window_height-50, _window_width-50, 40, 40);
[_player.view setFrame: videoView.bounds];
_fullScreenBtn.hidden = YES;
[UIView animateWithDuration:0.25 animations:^{
    videoView.transform = CGAffineTransformMakeRotation(M_PI_2);
} completion:^(BOOL finished) {
    _isGameFull = YES;
    _exitScreenBtn.hidden = NO;
    [self setNeedsStatusBarAppearanceUpdate];
    [self.view bringSubviewToFront:videoView];
    [videoView bringSubviewToFront:_exitScreenBtn];
}]; } #pragma mark - é€€å‡ºpå…¨å± -(void)exitFullScreen {

[UIView animateWithDuration:0.25 animations:^{
    videoView.transform = CGAffineTransformIdentity;
    videoView.frame = CGRectMake(0, 0, _window_width, _window_height);
    [_player.view setFrame: videoView.bounds];
} completion:^(BOOL finished) {
    _isGameFull = NO;
    _fullScreenBtn.hidden = NO;
    _exitScreenBtn.hidden = YES;
    [self setNeedsStatusBarAppearanceUpdate];
    [self.view sendSubviewToBack:videoView];
    [self.view sendSubviewToBack:_pkBackImgView];
}]; } - (BOOL)prefersStatusBarHidden {
return _isGameFull; } äºŒåã€å›¾ç‰‡åŠ æ–‡å­— // 1.å°†æ–‡å­—æ·»åŠ åˆ°å›¾ç‰‡ä¸Š;imageName å›¾ç‰‡åå­—ï¼Œ text éœ€ç”»çš„å­—ä½“ - (UIImage *)createShareImage:(UIImage *)tImage Context:(NSString *)text {
UIImage *sourceImage = tImage;
CGSize imageSize; //ç”»çš„èƒŒæ™¯ å¤§å°
imageSize = [sourceImage size];
UIGraphicsBeginImageContextWithOptions(imageSize, NO, 0.0);
[sourceImage drawAtPoint:CGPointMake(0, 0)];
//è·å¾— å›¾å½¢ä¸Šä¸‹æ–‡
CGContextRef context=UIGraphicsGetCurrentContext();
CGContextDrawPath(context, kCGPathStroke);
CGFloat nameFont = 8.f;
//ç”» è‡ªå·±æƒ³è¦ç”»çš„å†…å®¹
NSDictionary *attributes = @{NSFontAttributeName:[UIFont systemFontOfSize:nameFont]};
CGRect sizeToFit = [text boundingRectWithSize:CGSizeMake(CGFLOAT_MAX, nameFont) options:NSStringDrawingUsesDeviceMetrics attributes:attributes context:nil];
NSLog(@"å›¾ç‰‡: %f %f",imageSize.width,imageSize.height);
NSLog(@"sizeToFit: %f %f",sizeToFit.size.width,sizeToFit.size.height);
CGContextSetFillColorWithColor(context, [UIColor blackColor].CGColor);
[text drawAtPoint:CGPointMake((imageSize.width-sizeToFit.size.width)/2,0) withAttributes:@{NSFontAttributeName:[UIFont systemFontOfSize:nameFont]}];
//è¿”å›ç»˜åˆ¶çš„æ–°å›¾å½¢

UIImage *newImage=UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext();
return newImage; } äºŒåä¸€ã€æ ¹æ®è§†é¢‘åœ°å€è·å–å°é¢ -(void )getImageWithTime:(CMTime)time {
//NSURL *videoUrl = [[NSBundle mainBundle] URLForResource:@"hubblecast.m4v" withExtension:nil];
NSURL *videoUrl = [NSURL URLWithString:@"https://dspdemo-1258629649.cos.ap-shanghai.myqcloud.com/13629_IOS_20190218170618.mp4"];
AVAsset *videoAsset = [AVAsset assetWithURL:videoUrl];

AVAssetImageGenerator *imageGenerator = [AVAssetImageGenerator assetImageGeneratorWithAsset:videoAsset];
imageGenerator.maximumSize = CGSizeMake(200, 0);//æŒ‰æ¯”ä¾‹ç”Ÿæˆï¼Œ ä¸æŒ‡å®šä¼šé»˜è®¤è§†é¢‘åŸæ¥çš„æ ¼å¼å¤§å°
CMTime actualTime;//è·å–åˆ°å›¾ç‰‡ç¡®åˆ‡çš„æ—¶é—´
NSError *error = nil;
CGImageRef CGImage = [imageGenerator copyCGImageAtTime:time actualTime:&amp;actualTime error:&amp;error];
if (!error) {
    
    UIImage *image = [UIImage imageWithCGImage:CGImage];
    CMTimeShow(actualTime);   //{111600/90000 = 1.240}
    CMTimeShow(time); // {1/1 = 1.000}
    
    UIImageView *imgIV = [[UIImageView alloc]initWithFrame:CGRectMake(50, 80, _window_width-100, 200)];
    imgIV.contentMode = UIViewContentModeScaleAspectFill;
    imgIV.image = image;
    [self.view addSubview:imgIV];
    
} } äºŒåäºŒã€å¤–æ”¾
UInt32 sessionCategory = kAudioSessionCategory_MediaPlayback;
AudioSessionSetProperty(kAudioSessionProperty_AudioCategory,
                        sizeof(sessionCategory),
                        &amp;sessionCategory);

UInt32 audioRouteOverride = kAudioSessionOverrideAudioRoute_Speaker;
AudioSessionSetProperty (kAudioSessionProperty_OverrideAudioRoute,
                         sizeof (audioRouteOverride),
                         &amp;audioRouteOverride);

AVAudioSession *audioSession = [AVAudioSession sharedInstance];
//é»˜è®¤æƒ…å†µä¸‹æ‰¬å£°å™¨æ’­æ”¾
[audioSession setCategory:AVAudioSessionCategoryPlayback error:nil];
[audioSession setActive:YES error:nil]; äºŒåä¸‰ã€å»¶æ—¶ [self performSelector:@selector(doRotation:) withObject:nil afterDelay:17.0]; å–æ¶ˆå»¶æ—¶ [NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(doRotation:) object:nil]; äºŒåå››ã€å­˜å‚¨æ²™ç›’ - (void)nslogToFile {
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentDirectory = [paths objectAtIndex:0];
NSString *fileName = [NSString stringWithFormat:@"NSLog.txt"];// æ³¨æ„ä¸æ˜¯NSData!
NSString *logFilePath = [documentDirectory stringByAppendingPathComponent:fileName];
// å…ˆåˆ é™¤å·²ç»å­˜åœ¨çš„æ–‡ä»¶
NSFileManager *defaultManager = [NSFileManager defaultManager];
[defaultManager removeItemAtPath:logFilePath error:nil];
// å°†logè¾“å…¥åˆ°æ–‡ä»¶
freopen([logFilePath cStringUsingEncoding:NSASCIIStringEncoding], "a+", stdout);
freopen([logFilePath cStringUsingEncoding:NSASCIIStringEncoding], "a+", stderr); } äºŒåäº”ã€è®¡æ—¶å™¨ [self performSelector:@selector(hideTabBar) withObject:nil afterDelay:1.0]; [NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(hideTabBar) object:nil]; äºŒåå…­ã€æœ‰æ²¡æœ‰å®‰è£…åº”ç”¨ #import &lt;Social/SLComposeViewController.h&gt; #import &lt;Social/SLServiceTypes.h&gt; if (![SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]){
        [MBProgressHUD showError:@"æ‚¨æ‰‹æœºæ²¡æœ‰å®‰è£…FaceBook,æ— æ³•è¿›è¡Œç™»é™†"];
        return;
    } äºŒåä¸ƒã€AFN session.responseSerializer.acceptableContentTypes = [session.responseSerializer.acceptableContentTypes setByAddingObject:@"text/htmlâ€]; äºŒåå…«ã€å¯Œæ–‡æœ¬+æ ‡ç­¾ -(NSMutableAttributedString*)setFlagWithContentDic:(NSDictionary *)flagDic title:(NSString *)titleStr font:(CGFloat)tFont {

NSString *flagStr = minstr([flagDic valueForKey:@"name"]);
NSString *flagColStr = minstr([flagDic valueForKey:@"colour"]);
UIColor *flagBgCol = RGB_COLOR(flagColStr, 1);

NSMutableParagraphStyle *paragraph = [[NSMutableParagraphStyle alloc]init];
paragraph.alignment = NSTextAlignmentCenter;
paragraph.lineSpacing = 3;
paragraph.hyphenationFactor = 1.0;

NSString*itemName = [NSString stringWithFormat:@"%@ %@",titleStr,flagStr];
NSMutableAttributedString *titleAttrStr = [[NSMutableAttributedString alloc] initWithString:itemName attributes:@{NSFontAttributeName:[UIFont systemFontOfSize:tFont],NSParagraphStyleAttributeName: paragraph,NSForegroundColorAttributeName:UIColor.whiteColor}];
//è®¾ç½®æ ‡ç­¾çš„èƒŒæ™¯è‰²
YYTextBorder *border = [YYTextBorder new];
border.fillColor= flagBgCol;
//è°ƒæ•´Insetsæ›´æ”¹èƒŒæ™¯æ˜¾ç¤ºä½ç½®
border.insets= UIEdgeInsetsMake(-4, -2, -1, -2);
border.cornerRadius = 3;
[titleAttrStr yy_setTextBackgroundBorder:border range:NSMakeRange(titleStr.length+1, flagStr.length)];
//è®¾ç½®æ ‡ç­¾çš„æ–‡æœ¬é¢œè‰²
[titleAttrStr yy_setColor:[UIColor whiteColor] range:NSMakeRange(titleStr.length+1, flagStr.length)];
//è®¾ç½®æ ‡ç­¾æ–‡æœ¬çš„å­—å·
[titleAttrStr yy_setFont:[UIFont systemFontOfSize:(tFont-4)]range:NSMakeRange(titleStr.length+1, flagStr.length)];
//å°å­—å·åç§»
[titleAttrStr addAttribute:NSBaselineOffsetAttributeName value:@(0.66*4) range:NSMakeRange(titleStr.length+1, flagStr.length)];
return titleAttrStr; }
</code></pre></div></div>
:ET